{% model "events.json" %}
{% block title %}Bringing Yorkshires digital community together{% endblock %} 
{% block content %}
	<div class="logo-site">
	</div>
	<div class="hero">
		<h1>Bringing Yorkshire's digital community together</h1>
		<p>
			A hub for the growing digital community in Yorkshire, where individuals, organisations and user groups of all skill sets can easily see whats going on, find new connections and share knowledge.
		</p>
		<p>
			If you run a meetup in Yorkshire and would like to get involved  <a href="mailto:info@yorkshiredigital.com">let us know</a>.
		</p>
	</div>

	<section>
		<h1>Whats on</h1>

		<div class="calendar">
			
		</div>

	</section>



{% endblock %}

{% block pageScripts %} 

  	<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
	{{ "moment-2.5.1.js" | asset_url | script_tag }}
	{{ "clndr.js" | asset_url | script_tag }}

	<script type="text/javascript">

	$(function() {
	  var thisMonth = moment().format('YYYY-MM');

		var eventArray = [
		{% for event in model.events %}
		{ 
			startDate: "{{ event.startDate }}",
			endDate: "{{ event.endDate }}",
			title: "{{ event.title }}",
			description: "{{ event.description }}", 
		},
		{% endfor %}
		];

		var calendar = $('.calendar').clndr({
	    template: $('#template-calendar').html(),
	    events: eventArray,
	    multiDayEvents: {
	      startDate: 'startDate',
	      endDate: 'endDate'
	    },
	    startWithMonth: moment(),
	    clickEvents: {
	      click: function(target) {
	        console.log(target);
	      }
	    },
	    daysOfTheWeek: [
	    '<span class="header-day-sm">S</span><span class="header-day-md">Sun</span><span class="header-day-lg">Sunday</span>',
	    '<span class="header-day-sm">M</span><span class="header-day-md">Mon</span><span class="header-day-lg">Monday</span>',
	    '<span class="header-day-sm">T</span><span class="header-day-md">Tue</span><span class="header-day-lg">Tuesday</span>',
	    '<span class="header-day-sm">W</span><span class="header-day-md">Wed</span><span class="header-day-lg">Wednesday</span>',
	    '<span class="header-day-sm">T</span><span class="header-day-md">Thu</span><span class="header-day-lg">Thursday</span>',
	    '<span class="header-day-sm">F</span><span class="header-day-md">Fri</span><span class="header-day-lg">Friday</span>',
	    '<span class="header-day-sm">S</span><span class="header-day-md">Sat</span><span class="header-day-lg">Saturday</span>'],
	    forceSixRows: true
	  });
	});
	</script>
	
	<script type="text/template" id="template-calendar">
		<div class="clndr-controls">
			<div class="clndr-previous-button clndr-controls__nav">&lsaquo;</div>
			<h1 class="month"><%= month %></h1>
			<div class="clndr-next-button clndr-controls__nav">&rsaquo;</div>
		</div>
		<div class="clndr-grid">
			<div class="days-of-the-week">
				<header class="clndr-header">
				<% _.each(daysOfTheWeek, function(day) { %>
				<div class="header-day"><%= day %></div>
				<% }); %>
				</header>

				<div class="days">
					<% _.each(days, function(day) { %>
					<div class="<%= day.classes %>"><%= day.day %>
					<% _.each(day.events, function(event) { %>
						<span class="title"><%= event.title %></span>
						<span class="description"><%= event.title %></span>
					<% }); %>
					</div>
					<% }); %>
				</div>
			</div>
		</div>
		<div class="event-listing">
		  <div class="event-listing-title">EVENTS THIS MONTH</div>
		  <% _.each(eventsThisMonth, function(event) { %>
		      <div class="event-item">
		        <div class="event-item-name"><%= event.title %></div>
		        <div class="event-item-location"><%= event.description %></div>
		        <div class="event-item-date"><%= event.startDate %></div>
		      </div>
		    <% }); %>
		</div>
		<div class="clndr-today-button">Today</div>
	</script>
{% endblock %}