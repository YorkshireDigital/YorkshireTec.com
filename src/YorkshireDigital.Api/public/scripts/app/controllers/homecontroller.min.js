(function(){"use strict";function n(n,t,i,r,u,f,e){function h(){config.isBeta&&(n.beta=!0,n.reportedIssue={site:document.URL});n.to_trusted=function(n){return t.trustAsHtml(n)};n.clndrNextMonth=function(){n.clndr.forward();var t=moment(n.clndr.month._d).date(1).add(1,"M").format("DD/MM/YYYY"),i=moment(n.clndr.month._d).date(1).add(2,"M").format("DD/MM/YYYY");n.loadEvents(t,i,function(t){n.addNewEvents(t)})};n.clndrPreviousMonth=function(){n.clndr.back();var t=moment(n.clndr.month._d).date(1).subtract(1,"M").format("DD/MM/YYYY"),i=moment(n.clndr.month._d).date(1).format("DD/MM/YYYY");n.loadEvents(t,i,function(t){n.addNewEvents(t)})};n.addNewEvents=function(t){for(var f,u,r=[],i=t.length-1;i>=0;i--){for(f=!1,u=0;u<n.events.length;u++)t[i].uniqueName==n.events[u].uniqueName&&(f=!0);f===!1&&(r.push(t[i]),n.events.push(t[i]))}return n.populateFilters(r),n.clndr.addEvents(r),r};n.goToEvent=function(t){e.path("event/"+t,!1);n.scrollTop=$(window).scrollTop();n.loadEvent(t)};n.loadEvent=function(r){i.Events.get({eventId:r},function(i){n.activeEvent=i;n.activeEvent.startFormat=t.trustAsHtml(i.startFormat);$("body").addClass("no-scroll")})};n.closeEvent=function(){n.activeEvent&&(n.closedEvent=n.activeEvent.uniqueName);n.activeEvent=null;e.path("/",!1);$("body").removeClass("no-scroll");n.scrollTop&&($(window).scrollTop(n.scrollTop),n.scrollTop=null)};n.loadEvents=function(n,t,r){i.Calendar.query({from:n,to:t},r)};n.populateFilters=function(t){for(var r,u=n.interests||[],f=n.locations||[],i=t.length-1;i>=0;i--){for(r=t[i].interests.length-1;r>=0;r--)$.inArray(t[i].interests[r],u)===-1&&u.push(t[i].interests[r]);$.inArray(t[i].region,f)===-1&&f.push(t[i].region)}n.interests=u;n.locations=f;n.search=n.search||{interests:"",location:""}};n.formatDay=function(n,t){return moment(n).format(t)}}if(!n.events){h();var o=moment().date(1).subtract(1,"M").format("DD/MM/YYYY"),s=moment().date(1).add(2,"M").format("DD/MM/YYYY");n.loadEvents(o,s,function(t){n.events=t;n.populateFilters(t)})}f.eventName?n.loadEvent(f.eventName):n.activeEvent&&n.closeEvent()}window.app.controller("homeController",["$scope","$sce","calendarService","feedbackService","modal","$routeParams","$location",n])})();
//# sourceMappingURL=homecontroller.min.js.map
