(function(){"use strict";function n(n,t,i,r,u){function o(){n.to_trusted=function(n){return t.trustAsHtml(n)};n.clndrNextMonth=function(){n.clndr.forward();var t=moment(n.clndr.month._d).date(1).add(1,"M").format("DD/MM/YYYY"),i=moment(n.clndr.month._d).date(1).add(2,"M").format("DD/MM/YYYY");n.loadEvents(t,i,function(t){n.addNewEvents(t)})};n.clndrPreviousMonth=function(){n.clndr.back();var t=moment(n.clndr.month._d).date(1).subtract(1,"M").format("DD/MM/YYYY"),i=moment(n.clndr.month._d).date(1).format("DD/MM/YYYY");n.loadEvents(t,i,function(t){n.addNewEvents(t)})};n.addNewEvents=function(t){for(var f,u,r=[],i=t.length-1;i>=0;i--){for(f=!1,u=0;u<n.events.length;u++)t[i].uniqueName==n.events[u].uniqueName&&(f=!0);f===!1&&(r.push(t[i]),n.events.push(t[i]))}return n.populateFilters(r),n.clndr.addEvents(r),r};n.loadEvent=function(r){i.Events.get({eventId:r},function(i){n.activeEvent=i;n.activeEvent.startFormat=t.trustAsHtml(i.startFormat);u.path("/event/"+i.uniqueName,!1);$("body").addClass("no-scroll")})};n.closeEvent=function(){n.activeEvent=null;u.path("/",!1);$("body").removeClass("no-scroll")};n.loadEvents=function(n,t,r){i.Calendar.query({from:n,to:t},r)};n.populateFilters=function(t){for(var r,u=n.interests||[],f=n.locations||[],i=t.length-1;i>=0;i--){for(r=t[i].interests.length-1;r>=0;r--)$.inArray(t[i].interests[r],u)===-1&&u.push(t[i].interests[r]);$.inArray(t[i].region,f)===-1&&f.push(t[i].region)}n.interests=u;n.locations=f;n.search=n.search||{interests:"",location:""}}}o();n.title="homeController";r.eventName&&n.loadEvent(r.eventName);var f=moment().date(1).subtract(1,"M").format("DD/MM/YYYY"),e=moment().date(1).add(2,"M").format("DD/MM/YYYY");n.loadEvents(f,e,function(t){n.events=t;n.populateFilters(t)})}window.app.controller("homeController",["$scope","$sce","calendarService","$routeParams","$location",n])})();
/*
//# sourceMappingURL=homecontroller.min.js.map
*/